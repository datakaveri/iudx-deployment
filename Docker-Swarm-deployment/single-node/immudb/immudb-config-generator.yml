version: '3.4'
services:
    immudbconfiggenerator:
      image: immudbconfiggenerator
      networks:
        - overlay-net
      secrets:
        - adminpassword
        - catpassword
        - authpassword
        - rspassword
      deploy:
        replicas: 1
        restart_policy:
          condition: on-failure
      logging:
        driver: "json-file"
        options:
          max-size: "5m"
          max-file: "3"
          tag: "{\"name\":\"{{.Name}}\",\"id\":\"{{.ID}}\"}"

networks:
  overlay-net:
    external: true
    driver: overlay


secrets:
  adminpassword:
    file: secrets/passwords/adminpassword
  rspassword:
    file: secrets/passwords/rspassword
  authpassword:
    file: secrets/passwords/authpassword
  catpassword: 
    file: secrets/passwords/catpassword