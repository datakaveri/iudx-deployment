version: '3.4'
services:
    immudb:
      image: codenotary/immudb:1.0.5
      volumes:
        - immudb-data:/var/lib/immudb
      networks:
        - overlay-net
      environment:
        - IMMUDB_ADDRESS=0.0.0.0
        - IMMUDB_PGSQL_SERVER=true
      deploy:
        replicas: 1
        restart_policy:
          condition: on-failure

networks:
  overlay-net:
    external: true
    driver: overlay

volumes:
  immudb-data: