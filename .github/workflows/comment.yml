
name: pull request comment
on:
  issue_comment:                                     
    types: [created, edited, deleted]

jobs:
  test_rs:
    if: contains(github.event.comment.body, '/test_rs') && contains(github.event.comment.html_url, '/pull/') # check if the comments come from pull request, exclude those from issue. # check the comment if it contains the keywords
    runs-on: ubuntu-20.04
    steps:
    - name: checkout repository
      uses: actions/checkout@v3 
      
    - name: 'Deploy'
      uses: 'deliverybot/helm@v1'
      with:
        release: 'nginx'
        namespace: 'test'
        chart: 'iudx-deployment/K8s-deployment/Charts/resource-server'
        token: '${{ github.token }}'
        values: |
          name: foobar
        value-files: >-
          [
          "resource-values.yaml"
          ]
      env:
        KUBECONFIG_FILE: '${{ secrets.KUBE_CONFIG }}'
 
      
         
